{
  "id": "poem-generator",
  "shortName": "poem",
  "name": "Poem Generator",
  "description": "Create a poem with AI assistance.",
  "config": {
    "setTitleFromStageOutput": "generate-poem-with-title",
    "finalOutputStageId": "generate-html-preview",
    "showThinking": false,
    "autoScroll": {
      "enabled": true,
      "scrollToAutorun": true,
      "scrollToManual": false
    },
    "progressAnimation": {
      "dynamicSpeed": true,
      "singleCycle": true
    }
  },
  "stages": [
    {
      "id": "poem-topic",
      "title": "Poem Topic",
      "description": "What is the topic of your poem?",
      "inputType": "textarea",
      "outputType": "text",
      "dependencies": [],
      "autoRun": false,
      "tokenEstimate": 50,
      "showThinking": false
    },
    {
      "id": "generate-poem-with-title",
      "title": "Generate Poem & Title",
      "description": "AI will generate a poem and title based on your topic.",
      "inputType": "none",
      "promptTemplate": "Write a poem about '{{poem-topic.output}}'.\nMake it about 4 stanzas long.\n\nAlso create a compelling title for this poem.\n\nFormat your response as a JSON object with two keys:\n- 'title': A creative, engaging title for the poem (this will be used as the document title)\n- 'poem': The full poem content\n\nExample:\n{\n  \"title\": \"Whispers of the Morning\",\n  \"poem\": \"Lines of the poem here...\"\n}\n\nEnsure the output is valid JSON.",
      "model": "gemini-2.0-flash",
      "temperature": 0.8,
      "outputType": "json",
      "jsonFields": [
        {
          "key": "title",
          "label": "Poem Title",
          "type": "text",
          "displayOrder": 1
        },
        {
          "key": "poem",
          "label": "Poem Content", 
          "type": "textarea",
          "displayOrder": 2
        }
      ],
      "dependencies": ["poem-topic"],
      "autoRun": true,
      "tokenEstimate": 500,
      "aiRedoEnabled": true,
      "showThinking": false,
      "copyable": true
    },
    {
      "id": "image-briefing",
      "title": "Image Customization",
      "description": "Customize how your poem should be illustrated",
      "inputType": "form",
      "outputType": "json",
      "dependencies": ["generate-poem-with-title"],
      "autoRun": false,
      "isOptional": true,
      "formFields": [
        {
          "name": "additionalPrompt",
          "label": "Additional Image Instructions (Optional)",
          "type": "textarea",
          "placeholder": "Add any specific details you'd like in the image (e.g., 'warm colors', 'dramatic lighting', 'peaceful mood')",
          "validation": {
            "required": false,
            "maxLength": 500
          }
        },
        {
          "name": "aspectRatio",
          "label": "Image Format",
          "type": "select",
          "defaultValue": "3:4",
          "options": [
            { "value": "1:1", "label": "Square (1:1) - Social Media" },
            { "value": "3:4", "label": "Portrait (3:4) - Book Cover" },
            { "value": "4:3", "label": "Landscape (4:3) - Classic" },
            { "value": "16:9", "label": "Widescreen (16:9) - Desktop" },
            { "value": "9:16", "label": "Mobile (9:16) - Stories" }
          ],
          "validation": {
            "required": true
          }
        },
        {
          "name": "style",
          "label": "Artistic Style",
          "type": "select",
          "defaultValue": "artistic",
          "options": [
            { "value": "artistic", "label": "Artistic & Creative" },
            { "value": "photorealistic", "label": "Photorealistic" },
            { "value": "watercolor", "label": "Watercolor Painting" },
            { "value": "oil-painting", "label": "Oil Painting" },
            { "value": "digital-art", "label": "Digital Art" },
            { "value": "impressionist", "label": "Impressionist" },
            { "value": "minimalist", "label": "Minimalist" },
            { "value": "fantasy", "label": "Fantasy Art" },
            { "value": "vintage", "label": "Vintage Illustration" }
          ],
          "validation": {
            "required": true
          }
        },
        {
          "name": "numberOfImages",
          "label": "Number of Variations",
          "type": "select",
          "defaultValue": "2",
          "options": [
            { "value": "1", "label": "1 Image" },
            { "value": "2", "label": "2 Images" },
            { "value": "3", "label": "3 Images" },
            { "value": "4", "label": "4 Images" }
          ],
          "validation": {
            "required": true
          }
        }
      ],
      "jsonFields": [
        {
          "key": "additionalPrompt",
          "label": "Additional Instructions",
          "type": "textarea",
          "displayOrder": 1
        },
        {
          "key": "aspectRatio",
          "label": "Aspect Ratio",
          "type": "text",
          "displayOrder": 2
        },
        {
          "key": "style",
          "label": "Style",
          "type": "text",
          "displayOrder": 3
        },
        {
          "key": "numberOfImages",
          "label": "Number of Images",
          "type": "text",
          "displayOrder": 4
        }
      ],
      "tokenEstimate": 0,
      "showThinking": false
    },
    {
      "id": "create-image-prompt",
      "title": "Create Image Prompt",
      "description": "AI will create optimized imagen prompts and unique filenames for your poem illustrations.",
      "inputType": "none",
      "outputType": "json",
      "dependencies": ["generate-poem-with-title", "image-briefing"],
      "autoRun": true,
      "model": "gemini-2.0-flash",
      "temperature": 0.7,
      "promptTemplate": "Based on the poem and image customization settings, create optimized imagen prompts and unique filenames.\n\nPoem Title: {{generate-poem-with-title.output.title}}\nPoem Content:\n{{generate-poem-with-title.output.poem}}\n\nImage Customization:\n- Style: {{image-briefing.output.style}}\n- Aspect Ratio: {{image-briefing.output.aspectRatio}}\n- Number of Images: {{image-briefing.output.numberOfImages}}\n{{#if image-briefing.output.additionalPrompt}}- Additional Instructions: {{image-briefing.output.additionalPrompt}}{{/if}}\n\nCreate a response with:\n1. An optimized imagen prompt that captures the poem's essence and mood while incorporating the specified style\n2. Generate {{image-briefing.output.numberOfImages}} unique filenames (3-4 words each, highly unique)\n\nFormat as JSON:\n{\n  \"imagenPrompt\": \"Your optimized prompt here\",\n  \"filenames\": [\"unique-filename-one\", \"unique-filename-two\"]\n}\n\nIMPORTANT:\n- The imagen prompt should be detailed and evocative, capturing the poem's themes and emotions\n- Include the specified artistic style in the prompt\n- Filenames must be 3-4 words, descriptive, and highly unique (avoid generic terms)\n- Do NOT include any text, words, letters, or writing in the image prompt description\n- Make the prompt visually focused and artistic",
      "jsonFields": [
        {
          "key": "imagenPrompt",
          "label": "Optimized Imagen Prompt",
          "type": "textarea",
          "displayOrder": 1
        },
        {
          "key": "filenames",
          "label": "Generated Filenames",
          "type": "text",
          "displayOrder": 2
        }
      ],
      "tokenEstimate": 400,
      "aiRedoEnabled": true,
      "showThinking": false
    },
    {
      "id": "generate-poem-image",
      "title": "Generate Poem Illustration",
      "description": "AI will create an image that complements your poem.",
      "inputType": "none",
      "outputType": "image",
      "dependencies": ["create-image-prompt"],
      "autoRun": true,
      "model": "imagen-3.0-generate-002",
      "promptTemplate": "{{create-image-prompt.output.imagenPrompt}}",
      "imageGenerationSettings": {
        "provider": "imagen",
        "aspectRatio": "{{image-briefing.output.aspectRatio}}",
        "numberOfImages": "{{image-briefing.output.numberOfImages}}",
        "filenames": "{{create-image-prompt.output.filenames}}",
        "imagen": {
          "personGeneration": "allow_adult"
        }
      },
      "tokenEstimate": 300,
      "showThinking": false
    },
    {
      "id": "html-briefing",
      "title": "HTML Briefing",
      "description": "Special instructions for HTML formatting (optional)",
      "inputType": "textarea",
      "outputType": "text",
      "dependencies": ["generate-poem-with-title"],
      "autoRun": false,
      "isOptional": true,
      "tokenEstimate": 100,
      "showThinking": false
    },
    {
      "id": "generate-html-preview",
      "title": "Generate HTML Preview",
      "description": "AI will convert your poem into beautiful HTML based on your briefing.",
      "inputType": "none",
      "promptTemplate": "Convert this poem into beautiful HTML with proper formatting and styling, including the selected generated image:\n\nTitle: {{generate-poem-with-title.output.title}}\nPoem:\n{{generate-poem-with-title.output.poem}}\n\nSelected Image Data: {{generate-poem-image.output.image.selected}}\n\nSpecial instructions: {{html-briefing.output}}\n\nIMPORTANT: \n1. Output ONLY the clean HTML content without any markdown code blocks, backticks, or explanatory text. Do not include ```html or ``` markers. Just return the pure HTML that can be directly rendered.\n2. The selected image data contains the URL properties. Use the 'publicUrl' if available, otherwise use the 'dataUrl' property as the src for your img tag.\n3. The selected image is the one the user chose from multiple generated options.\n\nCreate clean, semantic HTML with inline CSS for styling. Include the selected image prominently in the design - consider placing it at the top, as a background element, or alongside the poem. Make it visually appealing and ensure the image and poem work together harmoniously. Use proper HTML structure with headings, paragraphs, and styling for a poem presentation. Include the title as an H1 heading.",
      "model": "gemini-2.0-flash",
      "temperature": 0.3,
      "outputType": "html",
      "dependencies": ["generate-poem-with-title", "generate-poem-image"],
      "autorunDependsOn": ["generate-poem-with-title", "generate-poem-image", "html-briefing"],
      "autoRun": true,
      "tokenEstimate": 800,
      "aiRedoEnabled": true,
      "showThinking": false
    },
    {
      "id": "export-publish",
      "title": "Export & Publish",
      "description": "Transform your poem into professional formats and publish instantly",
      "stageType": "export",
      "inputType": "none",
      "outputType": "export-interface",
      "dependencies": ["generate-html-preview"],
      "autoRun": false,
      "showAsHero": true,
      "triggerButton": {
        "label": "Export & Publish Poem",
        "variant": "hero",
        "size": "large",
        "description": "Create beautiful exports and shareable links"
      },
      "exportConfig": {
        "aiModel": "gemini-2.0-flash",
        "temperature": 0.3,
        "formats": {
          "html-styled": {
            "enabled": true,
            "label": "Beautiful Poem",
            "description": "Stunning HTML presentation with poetry-focused typography",
            "aiTemplate": "prompts/html-styled-template.md",
            "features": [
              "Poetry-focused design",
              "Responsive layout",
              "Print optimized",
              "Elegant typography"
            ]
          },
          "html-clean": {
            "enabled": true,
            "label": "Clean HTML",
            "description": "Semantic HTML perfect for poetry blogs and CMS",
            "aiTemplate": "prompts/html-clean-template.md",
            "features": [
              "Perfect poem structure",
              "CMS-friendly markup",
              "Accessibility compliant",
              "Markdown-ready"
            ]
          },
          "markdown": {
            "enabled": true,
            "label": "Markdown",
            "description": "Formatted markdown for GitHub, Notion, and more",
            "deriveFrom": "html-clean",
            "options": {
              "flavor": "github",
              "preserveHtml": false
            }
          },
          "pdf": {
            "enabled": true,
            "label": "PDF Poem",
            "description": "Professional PDF with elegant formatting",
            "deriveFrom": "html-styled"
          },
          "docx": {
            "enabled": true,
            "label": "Word Document",
            "description": "Microsoft Word format with styles",
            "deriveFrom": "html-styled"
          }
        },
        "publishing": {
          "enabled": true,
          "instant": true,
          "baseUrl": "/published",
          "formats": ["html-styled", "html-clean"],
          "features": {
            "seo": {
              "noindex": true,
              "openGraph": true,
              "twitterCard": true,
              "structuredData": true
            },
            "sharing": {
              "shortUrls": true,
              "qrCode": true,
              "socialButtons": true
            },
            "protection": {
              "public": true,
              "expiration": {
                "default": "never"
              }
            },
            "branding": {
              "showLogo": true,
              "poweredBy": "Created with Franz AI Writer"
            }
          }
        },
        "styling": {
          "defaultView": "styled",
          "themes": {
            "default": "elegant",
            "options": ["elegant", "minimal", "romantic", "classic"]
          },
          "customization": {
            "fonts": {
              "heading": "Playfair Display",
              "body": "Crimson Text"
            },
            "colors": {
              "primary": "#6b46c1",
              "background": "#fefbff",
              "text": "#1a1a1a"
            }
          }
        }
      }
    }
  ]
}
